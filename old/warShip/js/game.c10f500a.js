!function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return a(n?n:e)},h,h.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e);var t=new THREE.BoxGeometry(1,1,1),n=new THREE.MeshBasicMaterial({color:0});this.mesh=new THREE.Mesh(t,n),this.wireframe=new THREE.WireframeHelper(this.mesh,65280)}return a(e,[{key:"place",value:function(e){e.add(this.mesh),e.add(this.wireframe)}},{key:"render",value:function(){this.mesh.rotation.x+=.01,this.mesh.rotation.y+=.01}}]),e}();n["default"]=i},{}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(e){var n=e.game,i=e.x,o=e.y,s=e.asset,l=e.callback,u=e.callbackContext,h=e.overFrame,c=e.outFrame,f=e.downFrame,d=e.upFrame,p=e.label,y=e.style;r(this,t);var m=a(this,Object.getPrototypeOf(t).call(this,n,i,o,s,l,u,h,c,f,d));return m.anchor.setTo(.5),m.label=p,m.style=y,m.text=new Phaser.Text(m.game,0,0,m.label,m.style),m.text.anchor.setTo(.5),m.addChild(m.text),m}return i(t,e),t}(Phaser.Button);n["default"]=o},{}],3:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var a=e("./states"),i=r(a),o=new Phaser.Game(800,600,Phaser.AUTO);Object.keys(i).forEach(function(e){return o.state.add(e,i[e])}),o.state.start("Boot")},{"./states":9}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(e){var n=e.game,i=e.x,o=e.y,s=e.asset,l=e.health,u=e.tint,h=void 0===u?16711680:u;r(this,t);var c=a(this,Object.getPrototypeOf(t).call(this,n,i,o,s));return c.anchor.setTo(.5),c.scale.setTo(.8),c.health=l,c.tint=h,c.checkWorldBounds=!0,c.outOfBoundsKill=!0,c}return i(t,e),t}(Phaser.Sprite);n["default"]=o;var s=function(e){function t(e){var n=e.game,i=e.x,o=e.y,s=e.asset,l=e.health,u=e.tint,h=void 0===u?16711680:u;r(this,t);var c=a(this,Object.getPrototypeOf(t).call(this,n,i,o,s));return c.anchor.setTo(.5),c.scale.setTo(.8),c.health=l,c.tint=h,c.checkWorldBounds=!0,c.outOfBoundsKill=!0,c.enableBody=!0,c}return i(t,e),t}(Phaser.Sprite);n["default"]=s},{}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:f(a,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=e("./bullet"),h=r(u),c=function(e){function t(e){var n=e.game,r=e.x,o=e.y,s=e.asset,l=e.frame,u=e.health,h=e.bulletSpeed;a(this,t);var c=i(this,Object.getPrototypeOf(t).call(this,n,r,o,s,l));return c.game=n,c.anchor.setTo(.5),c.scale.setTo(.8),c.health=u,c.maxHealth=u,c.game.physics.arcade.enable(c),c.animations.add("spinning",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],30,!0),c.play("spinning"),c.bullets=c.game.add.group(),c.bullets.enableBody=!0,c.bulletSpeed=h,c}return o(t,e),s(t,[{key:"update",value:function(){this.position.y<.04*this.game.world.height?(this.position.y=.04*this.game.world.height+2,this.body.velocity.y*=-1):this.position.y>.96*this.game.world.height&&(this.position.y=.96*this.game.world.height-2,this.body.velocity.y*=-1),this.position.x<0&&this.kill()}},{key:"shoot",value:function(){var e=this.bullets.getFirstExists(!1);e?e.reset(this.x,this.bottom,2):(e=new h["default"]({game:this.game,x:this.x,y:this.bottom,health:5,asset:"bullet",tint:16711680}),this.bullets.add(e)),e.body.velocity.x=-1*this.bulletSpeed}},{key:"damage",value:function(e){l(Object.getPrototypeOf(t.prototype),"damage",this).call(this,e)}},{key:"reset",value:function(e){var n=e.x,r=e.y,a=e.health,i=e.bulletSpeed,o=e.speed;l(Object.getPrototypeOf(t.prototype),"reset",this).call(this,n,r,a),this.bulletSpeed=i,this.body.velocity.x=o.x,this.body.velocity.y=o.y}}]),t}(Phaser.Sprite);n["default"]=c},{"./bullet":4}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(e){var n=e.game,i=e.player;r(this,t);var o=a(this,Object.getPrototypeOf(t).call(this,n));return o.game=n,o.player=i,o.bg=new Phaser.Image(o.game,0,0,"hudBg"),o.width=800,o.healthbar=new Phaser.Sprite(o.game,2,2,"healthbar"),o.healthbar.scale.setTo(.995,11),o.score=0,o.scoreLabel="Score: ",o.scoreText=new Phaser.Text(o.game,20,14,o.scoreLabel+o.score,{font:"13px Verdana",fill:"white",align:"center"}),o.add(o.bg),o.add(o.healthbar),o.add(o.scoreText),o}return i(t,e),o(t,[{key:"updateHealth",value:function(){this.healthbar.crop(new Phaser.Rectangle(0,0,this.player.health/this.player.maxHealth*this.width,10)),this.healthbar.updateCrop()}},{key:"updateScore",value:function(e){this.score+=e,this.scoreText.text=this.scoreLabel+10*this.score;var t=localStorage.getItem("high-score");t<this.score&&localStorage.setItem("high-score",this.score)}}]),t}(Phaser.Group);n["default"]=s},{}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function f(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:f(a,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=e("./bullet"),h=r(u),c=function(e){function t(e){var n=e.game,r=e.x,o=e.y,s=e.asset,l=e.frame,u=e.health;a(this,t);var h=i(this,Object.getPrototypeOf(t).call(this,n,r,o,s,l));return h.game=n,h.anchor.setTo(.5),h.scale.setTo(.8),h.health=u,h.maxHealth=u,h.game.physics.arcade.enable(h),h.enableBody=!0,h.body.maxVelocity.setTo(250,250),h.body.collideWorldBounds=!0,h.body.allowGravity=!0,h.lastPos={x:r,y:o},h.diff={x:0,y:0},h.bullets=h.game.add.group(),h.bullets.enableBody=!0,h.bulletSpeed=-400,h}return o(t,e),s(t,[{key:"update",value:function(){var e=this.game.input.keyboard.isDown(Phaser.Keyboard.UP)||this.game.input.keyboard.isDown(Phaser.KeyCode.W),t=this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)||this.game.input.keyboard.isDown(Phaser.KeyCode.S),n=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)||this.game.input.keyboard.isDown(Phaser.KeyCode.A),r=this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)||this.game.input.keyboard.isDown(Phaser.KeyCode.D);e?this.body.acceleration.y=-500:t?this.body.acceleration.y=500:this.body.velocity.y>20?this.body.acceleration.y-=30:this.body.velocity.y<-20?this.body.acceleration.y+=30:(this.body.velocity.y=0,this.body.acceleration.y=0),r?this.body.acceleration.x=500:n?this.body.acceleration.x=-500:this.body.velocity.x>20?this.body.acceleration.x-=30:this.body.velocity.x<-20?this.body.acceleration.x+=30:(this.body.velocity.x=0,this.body.acceleration.x=0)}},{key:"shoot",value:function(){var e=this.bullets.getFirstExists(!1),t=this.y-3;e?e.reset(this.x,t=this.y-3,3):(e=new h["default"]({game:this.game,x:this.x,y:t=this.y-3,health:3,asset:"bullet",tint:311570}),this.bullets.add(e)),e.body.rotation=this.game.physics.arcade.moveToPointer(e,this.bulletSpeed,this.game.input.activePointer,500)}},{key:"damage",value:function(e){l(Object.getPrototypeOf(t.prototype),"damage",this).call(this,e)}}]),t}(Phaser.Sprite);n["default"]=c},{"./bullet":4}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000",this.load.image("loaderBg","img/loader-bg.310894d4.png"),this.load.image("loaderBar","img/loader-bar.a441202a.png")}},{key:"create",value:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.state.start("Preload")}}]),t}(Phaser.State);n["default"]=s},{}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./boot");Object.defineProperty(n,"Boot",{enumerable:!0,get:function(){return r(a)["default"]}});var i=e("./preload");Object.defineProperty(n,"Preload",{enumerable:!0,get:function(){return r(i)["default"]}});var o=e("./menu");Object.defineProperty(n,"Menu",{enumerable:!0,get:function(){return r(o)["default"]}});var s=e("./play");Object.defineProperty(n,"Play",{enumerable:!0,get:function(){return r(s)["default"]}});var l=e("./over");Object.defineProperty(n,"Over",{enumerable:!0,get:function(){return r(l)["default"]}})},{"./boot":8,"./menu":10,"./over":11,"./play":12,"./preload":13}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Main=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../extensions/textbutton"),u=r(l),h=e("../cube"),c=r(h),f=void 0,d=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"create",value:function(){var e=this;new p,this.title=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY-200,"warShip",{font:"36px Tahoma",fill:"white",align:"center"}),this.title.anchor.setTo(.5),this.intro=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY-100,"WASD + click to shoot",{font:"14px Tahoma",fill:"white",align:"center"}),this.intro.anchor.setTo(.5),this.start=new u["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"Start",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.loadout1=new u["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"loadout one",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.score=localStorage.getItem("high-score"),this.scoreLabel="High Score: ",this.scoreText=new Phaser.Text(this.game,20,14,this.scoreLabel+10*this.score,{font:"13px Verdana",fill:"white",align:"center"}),this.start.onInputUp.add(function(){e.state.start("Play"),$(f).remove()}),this.loadout1.onInputUp.add(function(){localStorage.setItem("loadout",1)}),this.menuPanel=this.add.group(),this.menuPanel.add(this.title),this.menuPanel.add(this.start),this.menuPanel.add(this.scoreText),this.menuPanel.add(this.intro)}}]),t}(Phaser.State);n["default"]=d;var p=n.Main=function(){function e(){a(this,e),this.elements=[],this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new THREE.WebGLRenderer({alpha:!0}),document.body.appendChild(this.renderer.domElement),this.handleResize(),window.addEventListener("resize",this.handleResize.bind(this),!1),f=this.renderer.domElement,$(f).addClass("threeClass"),this.addElement(new c["default"]),this.render()}return s(e,[{key:"addElement",value:function(e){this.elements.push(e),e.place(this.scene)}},{key:"handleResize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{key:"render",value:function(){this.elements.forEach(function(e){e.render()}),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))}}]),e}()},{"../cube":1,"../extensions/textbutton":2}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../extensions/textbutton"),u=r(l),h=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"create",value:function(){var e=this;this.gameOverTitle=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY-200,"Game over",{font:"36px Tahoma",fill:"white",align:"center"}),this.gameOverTitle.anchor.setTo(.5),this.start=new u["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY-30,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"Try again",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.menu=new u["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY+30,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"Menu",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.start.onInputDown.add(function(){e.state.start("Play")}),this.menu.onInputDown.add(function(){e.state.start("Menu")}),this.gameOverPanel=this.add.group(),this.gameOverPanel.add(this.gameOverTitle),this.gameOverPanel.add(this.start),this.gameOverPanel.add(this.menu)}}]),t}(Phaser.State);n["default"]=h},{"../extensions/textbutton":2}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../prefabs/player"),u=r(l),h=e("../prefabs/enemy"),c=r(h),f=e("../prefabs/hud"),d=r(f),p=function(e){function t(){return a(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"create",value:function(){var e=this,t=this.cache.getJSON("gameData");this.farback=this.add.tileSprite(0,0,800,600,"farback"),this.game.time.slowMotion=1,this.enemies=this.add.group(),this.enemies.enableBody=!0,this.player=new u["default"]({game:this.game,x:this.game.world.centerX,y:.92*this.game.world.height,health:t[0].hp,asset:"newfigther",frame:1}),this.game.stage.addChild(this.player),this.hud=new d["default"]({game:this.game,player:this.player}),this.game.input.onDown.add(function(){e.playerShooting=!0}),this.game.input.onUp.add(function(){e.playerShooting=!1}),this.enemyTime=0,this.enemyInterval=.5,this.enemyShootTime=0,this.enemyShootInterval=3,this.playerShootTime=0,this.playerShootInterval=.001,this.playerShooting=!1,this.game.time.events.loop(10*Phaser.Timer.SECOND,function(){e.enemyInterval>.2&&(e.enemyInterval-=.1)}),this.overlayBitmap=this.add.bitmapData(this.game.width,this.game.height),this.overlayBitmap.ctx.fillStyle="#000",this.overlayBitmap.ctx.fillRect(0,0,this.game.width,this.game.height),this.overlay=this.add.sprite(0,0,this.overlayBitmap),this.overlay.visible=!1,this.overlay.alpha=.75}},{key:"update",value:function(){var e=this;this.enemyTime+=this.game.time.physicsElapsed,this.enemyShootTime+=this.game.time.physicsElapsed,this.playerShootTime+=this.game.time.physicsElapsed,this.enemyTime>this.enemyInterval&&(this.enemyTime=0,this.createEnemy({game:this.game,x:this.game.width,y:10*this.game.rnd.integerInRange(6,76),speed:{x:-10*this.game.rnd.integerInRange(5,10),y:10*this.game.rnd.integerInRange(5,10)},health:9,bulletSpeed:10*this.game.rnd.integerInRange(10,20),asset:"alien"})),this.enemyShootTime>this.enemyShootInterval&&(this.enemyShootTime=0,this.enemies.forEachAlive(function(e){return e.shoot()}),this.player.alive||this.game.world.bringToTop(this.overlay)),this.playerShooting&&this.playerShootTime>this.playerShootInterval&&(this.playerShootTime=0,this.player.alive&&this.player.shoot()),this.game.physics.arcade.overlap(this.player.bullets,this.enemies,this.hitEnemy,null,this),this.game.physics.arcade.overlap(this.player,this.enemies,this.crashEnemy,null,this),this.enemies.forEach(function(t){return e.game.physics.arcade.overlap(e.player,t.bullets,e.hitPlayer,null,e)}),this.farback.tilePosition.x-=3}},{key:"createEnemy",value:function(e){var t=this.enemies.getFirstExists(!1);t||(t=new c["default"](e),this.enemies.add(t)),t.reset(e)}},{key:"hitEffect",value:function(e,t){var n=this,r=this.game.add.tween(e),a=this.game.add.emitter(),i=0,o=100,s=10;r.to({tint:16711680},100),r.onComplete.add(function(){e.tint=16777215}),r.start(),a.x=e.x,a.y=e.y,a.gravity=0,a.makeParticles("particle"),e.health<=0&&(o=200,s=40,t=16711680),a.minParticleSpeed.setTo(-o,-o),a.maxParticleSpeed.setTo(o,o),a.start(!0,500,null,s),a.update=function(){i+=n.game.time.physicsElapsed,i>=.6&&(i=0,a.destroy())},a.forEach(function(e){return e.tint=t}),this.player.alive||this.game.world.bringToTop(this.overlay)}},{key:"hitEnemy",value:function(e,t){t.damage(e.health),this.hitEffect(t,e.tint),t.alive||this.hud.updateScore(t.maxHealth),e.kill()}},{key:"hitPlayer",value:function(e,t){e.damage(t.health),this.hud.updateHealth(),this.hitEffect(e,t.tint),e.alive||this.gameOver(),t.kill()}},{key:"crashEnemy",value:function(e,t){t.damage(t.health),e.damage(t.health),this.hitEffect(e),this.hitEffect(t),t.alive||this.hud.updateScore(t.maxHealth),this.hud.updateHealth(),e.alive||this.gameOver()}},{key:"gameOver",value:function(){var e=this;this.game.time.slowMotion=3,this.overlay.visible=!0,this.game.world.bringToTop(this.overlay);var t=this.game.time.create(this.game,!0);t.add(3e3,function(){e.game.state.start("Over")}),t.start()}}]),t}(Phaser.State);n["default"]=p},{"../prefabs/enemy":5,"../prefabs/hud":6,"../prefabs/player":7}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){function t(){return r(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"preload",value:function(){this.loaderBg=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBg"),this.loaderBar=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBar"),this.loaderBg.anchor.setTo(.5),this.loaderBar.anchor.setTo(.5),this.load.setPreloadSprite(this.loaderBar),this.load.atlasJSONArray("newfigther","img/spritesheet/newfigther.ceb2e71f.png","data/spritesheet/newfigther.e4354c65.json"),this.load.atlasJSONArray("alien","img/spritesheet/alien.0cf7c7a5.png","data/spritesheet/alien.78bc238d.json"),this.load.atlasJSONArray("button","img/spritesheet/button.13a26c21.png","data/spritesheet/button.2e5a8520.json"),this.load.image("farback","img/night_sky.d8b9ed5c.png"),this.load.image("bullet","img/bullet.841b4ea4.png"),this.load.image("particle","img/particle.1d47c67e.gif"),this.load.image("healthbar","img/healthbar.d9567897.png"),this.load.image("hudBg","img/hud-bg.c0034354.png"),this.load.audio("playMusic",["audio/music/play.461c27fe.mp3"]),this.load.audio("menuMusic",["audio/music/menu.4340d25a.mp3"]),this.load.audio("menuOver",["audio/sound/menu-over.adf7e1ff.mp3"]),this.load.audio("menuOut",["audio/sound/menu-out.b4fb68f8.mp3"]),this.load.audio("menuDown",["audio/sound/menu-click.76947bdf.mp3"]),this.load.audio("bulletHit",["audio/sound/bullet-hit.b5d75795.mp3"]),this.load.audio("enemyShot",["audio/sound/enemy-shot.b33bb7cb.mp3"]),this.load.audio("enemyExplosion",["audio/sound/enemy-explosion.f648d3c1.mp3"]),this.load.audio("playerShot",["audio/sound/player-shot.bb42bb0f.mp3"]),this.load.audio("playerExplosion",["audio/sound/player-explosion.cdf713b1.mp3"]),this.load.audio("gameOver",["audio/sound/game-over.96e076dd.mp3"]),this.load.json("gameData","data/gameData.a0349def.json")}},{key:"create",value:function(){this.state.start("Menu")}}]),t}(Phaser.State);n["default"]=s},{}]},{},[3]);
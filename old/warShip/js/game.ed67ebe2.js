!function e(t,i,n){function a(o,s){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return a(i?i:e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e);var t=new THREE.BoxGeometry(1,1,1),i=new THREE.MeshBasicMaterial({color:0});this.mesh=new THREE.Mesh(t,i),this.wireframe=new THREE.WireframeHelper(this.mesh,65280)}return a(e,[{key:"place",value:function(e){e.add(this.mesh),e.add(this.wireframe)}},{key:"render",value:function(){this.mesh.rotation.x+=.01,this.mesh.rotation.y+=.01}}]),e}();i["default"]=r},{}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(e){var i=e.game,r=e.x,o=e.y,s=e.asset,l=e.callback,h=e.callbackContext,u=e.overFrame,c=e.outFrame,d=e.downFrame,f=e.upFrame,p=e.label,y=e.style;n(this,t);var m=a(this,Object.getPrototypeOf(t).call(this,i,r,o,s,l,h,u,c,d,f));return m.anchor.setTo(.5),m.label=p,m.style=y,m.text=new Phaser.Text(m.game,0,0,m.label,m.style),m.text.anchor.setTo(.5),m.addChild(m.text),m}return r(t,e),t}(Phaser.Button);i["default"]=o},{}],3:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}var a=e("./states"),r=n(a),o=new Phaser.Game(800,600,Phaser.AUTO,null,null,!0);Object.keys(r).forEach(function(e){return o.state.add(e,r[e])}),o.state.start("Boot")},{"./states":9}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(e){var i=e.game,r=e.x,o=e.y,s=e.asset,l=e.health,h=e.tint,u=void 0===h?16731469:h;n(this,t);var c=a(this,Object.getPrototypeOf(t).call(this,i,r,o,s));return c.anchor.setTo(.5),c.scale.setTo(.8),c.health=l,c.tint=u,c.checkWorldBounds=!0,c.outOfBoundsKill=!0,c}return r(t,e),t}(Phaser.Sprite);i["default"]=o;var s=function(e){function t(e){var i=e.game,r=e.x,o=e.y,s=e.asset,l=e.health,h=e.tint,u=void 0===h?16711680:h;n(this,t);var c=a(this,Object.getPrototypeOf(t).call(this,i,r,o,s));return c.anchor.setTo(.5),c.scale.setTo(.8),c.health=l,c.tint=u,c.checkWorldBounds=!0,c.outOfBoundsKill=!0,c.enableBody=!0,c}return r(t,e),t}(Phaser.Sprite);i["default"]=s},{}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function d(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:d(a,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},h=e("./bullet"),u=n(h),c=function(e){function t(e){var i=e.game,n=e.x,o=e.y,s=e.asset,l=e.frame,h=e.health,u=e.bulletSpeed;a(this,t);var c=r(this,Object.getPrototypeOf(t).call(this,i,n,o,s,l));return c.game=i,c.anchor.setTo(.5),c.scale.setTo(.8),c.health=h,c.maxHealth=h,c.game.physics.arcade.enable(c),c.animations.add("spinning",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],30,!0),c.play("spinning"),c.bullets=c.game.add.group(),c.bullets.enableBody=!0,c.bulletSpeed=u,c.player,c}return o(t,e),s(t,[{key:"update",value:function(){this.position.y<.04*this.game.world.height?(this.position.y=.04*this.game.world.height+2,this.body.velocity.y*=-1):this.position.y>.96*this.game.world.height&&(this.position.y=.96*this.game.world.height-2,this.body.velocity.y*=-1),this.position.x<0&&this.kill()}},{key:"shoot",value:function(e){var t=this.bullets.getFirstExists(!1);t?t.reset(this.x,this.bottom,2):(t=new u["default"]({game:this.game,x:this.x,y:this.bottom,health:5,asset:"bullet",tint:16731469}),this.bullets.add(t)),e?t.body.rotation=this.game.physics.arcade.moveToObject(t,e,this.bulletSpeed):t.body.velocity.x=-1*this.bulletSpeed}},{key:"damage",value:function(e){l(Object.getPrototypeOf(t.prototype),"damage",this).call(this,e)}},{key:"reset",value:function(e){var i=e.x,n=e.y,a=e.health,r=e.bulletSpeed,o=e.speed;l(Object.getPrototypeOf(t.prototype),"reset",this).call(this,i,n,a),this.bulletSpeed=r,this.body.velocity.x=o.x,this.body.velocity.y=o.y}}]),t}(Phaser.Sprite);i["default"]=c},{"./bullet":4}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e){var i=e.game,r=e.player;n(this,t);var o=a(this,Object.getPrototypeOf(t).call(this,i));return o.game=i,o.player=r,o.totalTime=0,o.width=800,o.score=0,o.timer=0,o.highScore=localStorage.getItem("high-score"),o.maxHealth=o.player.health,o.originalWidth=$(window).width(),$("#btnOne").hide(),$("#hud").show(),o}return r(t,e),o(t,[{key:"handleResize",value:function(){var e=$(window).width(),t=e/this.originalWidth;$("#hud").css("-webkit-transform","scale("+t+")"),console.log($(window).width())}},{key:"update",value:function(){this.totalTime+=this.game.time.physicsElapsed,this.timer=Math.round(this.totalTime),$(".timeText h1").text("Time: "+this.timer)}},{key:"updateHealth",value:function(){var e=this.player.health/this.maxHealth*100;$(".healthbar").width(Math.round(e)+"%")}},{key:"updateScore",value:function(e){this.score+=e,$(".scoreText h1").text("Score: "+10*this.score),this.highScore<this.score&&localStorage.setItem("high-score",this.score)}}]),t}(Phaser.Group);i["default"]=s},{}],7:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function d(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:d(a,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},h=e("./bullet"),u=n(h),c=function(e){function t(e){var i=e.game,n=e.x,o=e.y,s=e.asset,l=e.frame,h=e.health;a(this,t);var u=r(this,Object.getPrototypeOf(t).call(this,i,n,o,s,l));return u.game=i,u.anchor.setTo(.5),u.scale.setTo(.8),u.health=h,u.maxHealth=h,u.game.physics.arcade.enable(u),u.enableBody=!0,u.body.maxVelocity.setTo(250,250),u.body.collideWorldBounds=!0,u.body.allowGravity=!0,u.lastPos={x:n,y:o},u.diff={x:0,y:0},u.bullets=u.game.add.group(),u.bullets.enableBody=!0,u.bulletSpeed=-400,u.loadout=localStorage.getItem("loadout"),u}return o(t,e),s(t,[{key:"update",value:function(){var e=this.game.input.keyboard.isDown(Phaser.Keyboard.UP)||this.game.input.keyboard.isDown(Phaser.KeyCode.W),t=this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)||this.game.input.keyboard.isDown(Phaser.KeyCode.S),i=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)||this.game.input.keyboard.isDown(Phaser.KeyCode.A),n=this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)||this.game.input.keyboard.isDown(Phaser.KeyCode.D);e?this.body.acceleration.y=-500:t?this.body.acceleration.y=500:this.body.velocity.y>20?this.body.acceleration.y-=50:this.body.velocity.y<-20?this.body.acceleration.y+=50:(this.body.velocity.y=0,this.body.acceleration.y=0),n?this.body.acceleration.x=500:i?this.body.acceleration.x=-500:this.body.velocity.x>20?this.body.acceleration.x-=30:this.body.velocity.x<-20?this.body.acceleration.x+=30:(this.body.velocity.x=0,this.body.acceleration.x=0)}},{key:"shoot",value:function(){var e=this.bullets.getFirstExists(!1),t=this.y-3;e?e.reset(this.x,t=this.y-3,3):(e=new u["default"]({game:this.game,x:this.x,y:t=this.y-3,health:3,asset:"bullet",tint:13434828}),this.bullets.add(e)),this.loadout<6?e.body.velocity.x=-1*this.bulletSpeed:e.body.rotation=this.game.physics.arcade.moveToPointer(e,-this.bulletSpeed,this.game.input.activePointer)}},{key:"damage",value:function(e){l(Object.getPrototypeOf(t.prototype),"damage",this).call(this,e)}}]),t}(Phaser.Sprite);i["default"]=c},{"./bullet":4}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),o(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000",this.load.image("loaderBg","img/loader-bg.310894d4.png"),this.load.image("loaderBar","img/loader-bar.a441202a.png")}},{key:"create",value:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.state.start("Preload")}}]),t}(Phaser.State);i["default"]=s},{}],9:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var a=e("./boot");Object.defineProperty(i,"Boot",{enumerable:!0,get:function(){return n(a)["default"]}});var r=e("./preload");Object.defineProperty(i,"Preload",{enumerable:!0,get:function(){return n(r)["default"]}});var o=e("./menu");Object.defineProperty(i,"Menu",{enumerable:!0,get:function(){return n(o)["default"]}});var s=e("./play");Object.defineProperty(i,"Play",{enumerable:!0,get:function(){return n(s)["default"]}});var l=e("./over");Object.defineProperty(i,"Over",{enumerable:!0,get:function(){return n(l)["default"]}})},{"./boot":8,"./menu":10,"./over":11,"./play":12,"./preload":13}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0}),i.Main=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../extensions/textbutton"),h=n(l),u=e("../cube"),c=n(u),d=void 0,f=void 0,p=function(e){function t(){return a(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"create",value:function(){var e=this;f=this,new y,this.farback=this.add.tileSprite(0,0,800,600,"farback"),this.title=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY-200,"warShip",{font:"36px Tahoma",fill:"white",align:"center"}),this.title.anchor.setTo(.5),this.intro=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY-100,"WASD + click to shoot",{font:"14px Tahoma",fill:"white",align:"center"}),this.intro.anchor.setTo(.5),this.loadout1=new h["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY+100,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"loadout one",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.loadout2=new h["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY+150,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"loadout two",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.score=localStorage.getItem("high-score"),this.scoreLabel="High Score: ",this.scoreText=new Phaser.Text(this.game,20,14,this.scoreLabel+10*this.score,{font:"13px Verdana",fill:"white",align:"center"}),this.loadout1.onInputUp.add(function(){localStorage.setItem("loadout",10),e.state.start("Play"),$(d).remove()}),this.loadout2.onInputUp.add(function(){localStorage.setItem("loadout",5),e.state.start("Play"),$(d).remove()}),this.menuPanel=this.add.group(),this.menuPanel.add(this.title),this.menuPanel.add(this.loadout1),this.menuPanel.add(this.loadout2),this.menuPanel.add(this.scoreText),this.menuPanel.add(this.intro),$("#btnOne").show(),$("#btnOne").click(function(){f.state.start("Play"),$(d).remove()})}}]),t}(Phaser.State);i["default"]=p;var y=i.Main=function(){function e(){a(this,e),this.elements=[],this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new THREE.WebGLRenderer({alpha:!0}),document.body.appendChild(this.renderer.domElement),this.handleResize(),window.addEventListener("resize",this.handleResize.bind(this),!1),d=this.renderer.domElement,$(d).addClass("threeClass"),this.addElement(new c["default"]),this.render()}return s(e,[{key:"addElement",value:function(e){this.elements.push(e),e.place(this.scene)}},{key:"handleResize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{key:"render",value:function(){this.elements.forEach(function(e){e.render()}),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))}}]),e}()},{"../cube":1,"../extensions/textbutton":2}],11:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../extensions/textbutton"),h=n(l),u=function(e){function t(){return a(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"create",value:function(){var e=this;this.gameOverTitle=new Phaser.Text(this.game,this.game.world.centerX,this.game.world.centerY-200,"Game over",{font:"36px Tahoma",fill:"white",align:"center"}),this.gameOverTitle.anchor.setTo(.5),this.start=new h["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY-30,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"Try again",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.menu=new h["default"]({game:this.game,x:this.game.world.centerX,y:this.game.world.centerY+30,asset:"button",overFrame:2,outFrame:1,downFrame:0,upFrame:1,label:"Menu",style:{font:"16px Verdana",fill:"white",align:"center"}}),this.start.onInputDown.add(function(){e.state.start("Play")}),this.menu.onInputDown.add(function(){e.state.start("Menu")}),this.gameOverPanel=this.add.group(),this.gameOverPanel.add(this.gameOverTitle),this.gameOverPanel.add(this.start),this.gameOverPanel.add(this.menu),$(".healthbar").width("100%"),$(".scoreText h1").text("Score: 0"),$("#hud").hide()}}]),t}(Phaser.State);i["default"]=u},{"../extensions/textbutton":2}],12:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../prefabs/player"),h=n(l),u=e("../prefabs/enemy"),c=n(u),d=e("../prefabs/hud"),f=n(d),p=function(e){function t(){return a(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"create",value:function(){var e=this,t=this.cache.getJSON("gameData");this.farback=this.add.tileSprite(0,0,800,600,"farback"),this.totalTime=0,this.game.time.slowMotion=1,this.enemies=this.add.group(),this.enemies.enableBody=!0,this.enemies2=this.add.group(),this.enemies2.enableBody=!0,this.player=new h["default"]({game:this.game,x:this.game.world.centerX,y:.92*this.game.world.height,health:t[0].hp,asset:"newfigther",frame:1}),this.game.stage.addChild(this.player),this.hud=new f["default"]({game:this.game,player:this.player}),this.game.input.onDown.add(function(){e.playerShooting=!0}),this.game.input.onUp.add(function(){e.playerShooting=!1}),this.enemyTime=0,this.enemyTime2=0,this.enemyInterval=1,this.enemyInterval2=1,this.enemyShootTime=0,this.enemyShootTime2=0,this.enemyShootInterval=3;var i=localStorage.getItem("loadout");this.playerShootTime=0,this.playerShootInterval=.01*i,this.playerShooting=!1,this.game.time.events.loop(10*Phaser.Timer.SECOND,function(){e.enemyInterval>.2&&(e.enemyInterval-=.1)}),this.overlayBitmap=this.add.bitmapData(this.game.width,this.game.height),this.overlayBitmap.ctx.fillStyle="#000",this.overlayBitmap.ctx.fillRect(0,0,this.game.width,this.game.height),this.overlay=this.add.sprite(0,0,this.overlayBitmap),this.overlay.visible=!1,this.overlay.alpha=.75}},{key:"update",value:function(){var e=this;this.totalTime+=this.game.time.physicsElapsed,this.enemyTime+=this.game.time.physicsElapsed,this.enemyTime2+=this.game.time.physicsElapsed,this.enemyShootTime+=this.game.time.physicsElapsed,this.enemyShootTime2+=this.game.time.physicsElapsed,this.playerShootTime+=this.game.time.physicsElapsed,this.enemyTime>this.enemyInterval&&(this.enemyTime=0,this.createEnemy({game:this.game,x:this.game.width,y:10*this.game.rnd.integerInRange(6,76),speed:{x:-10*this.game.rnd.integerInRange(5,10),y:1},health:1,bulletSpeed:250,asset:"alien"})),this.totalTime>10&&this.enemyTime2>this.enemyInterval2&&(this.enemyInterval=3,this.enemyTime2=0,this.createEnemy2({game:this.game,x:this.game.width,y:10*this.game.rnd.integerInRange(6,76),speed:{x:-10*this.game.rnd.integerInRange(5,10),y:10*this.game.rnd.integerInRange(5,10)},health:9,bulletSpeed:10*this.game.rnd.integerInRange(15,25),asset:"alien2"})),this.enemyShootTime>this.enemyShootInterval&&(this.enemyShootTime=0,this.enemies.forEachAlive(function(t){return t.shoot(e.player)}),this.player.alive||this.game.world.bringToTop(this.overlay)),this.enemyShootTime2>this.enemyShootInterval&&(this.enemyShootTime2=0,this.enemies2.forEachAlive(function(e){return e.shoot()}),this.player.alive||this.game.world.bringToTop(this.overlay)),this.playerShooting&&this.playerShootTime>this.playerShootInterval&&(this.playerShootTime=0,this.player.alive&&this.player.shoot()),this.game.physics.arcade.overlap(this.player.bullets,this.enemies,this.hitEnemy,null,this),this.game.physics.arcade.overlap(this.player.bullets,this.enemies2,this.hitEnemy,null,this),this.game.physics.arcade.overlap(this.player,this.enemies,this.crashEnemy,null,this),this.game.physics.arcade.overlap(this.player,this.enemies2,this.crashEnemy,null,this),this.enemies.forEach(function(t){return e.game.physics.arcade.overlap(e.player,t.bullets,e.hitPlayer,null,e)}),this.enemies2.forEach(function(t){return e.game.physics.arcade.overlap(e.player,t.bullets,e.hitPlayer,null,e)}),this.farback.tilePosition.x-=3}},{key:"createEnemy",value:function(e){var t=this.enemies.getFirstExists(!1);t||(t=new c["default"](e),this.enemies.add(t)),t.reset(e)}},{key:"createEnemy2",value:function(e){var t=this.enemies2.getFirstExists(!1);t||(t=new c["default"](e),this.enemies2.add(t)),t.reset(e)}},{key:"hitEffect",value:function(e,t){var i=this,n=this.game.add.tween(e),a=this.game.add.emitter(),r=0,o=100,s=10;n.to({tint:16711680},100),n.onComplete.add(function(){e.tint=16777215}),n.start(),a.x=e.x,a.y=e.y,a.gravity=0,a.makeParticles("particle"),e.health<=0&&(o=200,s=40,t=16711680),a.minParticleSpeed.setTo(-o,-o),a.maxParticleSpeed.setTo(o,o),a.start(!0,500,null,s),a.update=function(){r+=i.game.time.physicsElapsed,r>=.6&&(r=0,a.destroy())},a.forEach(function(e){return e.tint=t}),this.player.alive||this.game.world.bringToTop(this.overlay)}},{key:"hitEnemy",value:function(e,t){t.damage(e.health),this.hitEffect(t,e.tint),t.alive||this.hud.updateScore(t.maxHealth),e.kill()}},{key:"hitPlayer",value:function(e,t){e.damage(t.health),this.hud.updateHealth(),this.hitEffect(e,t.tint),e.alive||this.gameOver(),t.kill()}},{key:"crashEnemy",value:function(e,t){e.damage(t.health),t.damage(t.health),this.hitEffect(e),this.hitEffect(t),t.alive||this.hud.updateScore(t.maxHealth),this.hud.updateHealth(),e.alive||this.gameOver()}},{key:"gameOver",value:function(){var e=this;this.game.time.slowMotion=3,this.overlay.visible=!0,this.game.world.bringToTop(this.overlay);var t=this.game.time.create(this.game,!0);t.add(3e3,function(){e.game.state.start("Over")}),t.start()}}]),t}(Phaser.State);i["default"]=p},{"../prefabs/enemy":5,"../prefabs/hud":6,"../prefabs/player":7}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),o(t,[{key:"preload",value:function(){this.loaderBg=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBg"),this.loaderBar=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBar"),this.loaderBg.anchor.setTo(.5),this.loaderBar.anchor.setTo(.5),this.load.setPreloadSprite(this.loaderBar),this.load.atlasJSONArray("smallfighter","img/spritesheet/smallfighter.fde38ee6.png","data/spritesheet/smallfighter.cbe14dd3.json"),this.load.atlasJSONArray("newfigther","img/spritesheet/newfigther.40eae0cb.png","data/spritesheet/newfigther.e4354c65.json"),this.load.atlasJSONArray("alien","img/spritesheet/alien.44bbb602.png","data/spritesheet/alien.78bc238d.json"),this.load.atlasJSONArray("alien2","img/spritesheet/alien2.dee244f4.png","data/spritesheet/alien.78bc238d.json"),this.load.atlasJSONArray("button","img/spritesheet/button.13a26c21.png","data/spritesheet/button.2e5a8520.json"),this.load.image("farback","img/night_sky.d40bb24d.png"),this.load.image("bullet","img/bullet.2de9ae78.png"),this.load.image("particle","img/particle.1d47c67e.gif"),this.load.image("healthbar","img/healthbar.d9567897.png"),this.load.image("hudBg","img/hud-bg.c0034354.png"),this.load.audio("playMusic",["audio/music/play.461c27fe.mp3"]),this.load.audio("menuMusic",["audio/music/menu.4340d25a.mp3"]),this.load.audio("menuOver",["audio/sound/menu-over.adf7e1ff.mp3"]),this.load.audio("menuOut",["audio/sound/menu-out.b4fb68f8.mp3"]),this.load.audio("menuDown",["audio/sound/menu-click.76947bdf.mp3"]),this.load.audio("bulletHit",["audio/sound/bullet-hit.b5d75795.mp3"]),this.load.audio("enemyShot",["audio/sound/enemy-shot.b33bb7cb.mp3"]),this.load.audio("enemyExplosion",["audio/sound/enemy-explosion.f648d3c1.mp3"]),this.load.audio("playerShot",["audio/sound/player-shot.bb42bb0f.mp3"]),this.load.audio("playerExplosion",["audio/sound/player-explosion.cdf713b1.mp3"]),this.load.audio("gameOver",["audio/sound/game-over.96e076dd.mp3"]),this.load.json("gameData","data/gameData.4c01b511.json")}},{key:"create",value:function(){this.state.start("Menu")}}]),t}(Phaser.State);i["default"]=s},{}]},{},[3]);
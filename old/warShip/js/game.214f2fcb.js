!function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){n(this,e);var t=new THREE.BoxGeometry(1,1,1),i=new THREE.MeshBasicMaterial({color:0});this.mesh=new THREE.Mesh(t,i),this.wireframe=new THREE.WireframeHelper(this.mesh,65280)}return o(e,[{key:"place",value:function(e){e.add(this.mesh),e.add(this.wireframe)}},{key:"render",value:function(){this.mesh.rotation.x+=.01,this.mesh.rotation.y+=.01}}]),e}();i["default"]=a},{}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){function t(e){var i=e.game,a=e.x,r=e.y,s=e.asset,l=e.callback,h=e.callbackContext,u=e.overFrame,c=e.outFrame,p=e.downFrame,f=e.upFrame,d=e.label,y=e.style;n(this,t);var m=o(this,Object.getPrototypeOf(t).call(this,i,a,r,s,l,h,u,c,p,f));return m.anchor.setTo(.5),m.label=d,m.style=y,m.text=new Phaser.Text(m.game,0,0,m.label,m.style),m.text.anchor.setTo(.5),m.addChild(m.text),m}return a(t,e),t}(Phaser.Button);i["default"]=r},{}],3:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}var o=e("./states"),a=n(o),r=new Phaser.Game(1024,576,Phaser.AUTO,null,null,!0);Object.keys(a).forEach(function(e){return r.state.add(e,a[e])}),r.state.start("Boot")},{"./states":10}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){function t(e){var i=e.game,a=e.x,r=e.y,s=e.asset,l=e.health,h=e.tint,u=void 0===h?16731469:h;n(this,t);var c=o(this,Object.getPrototypeOf(t).call(this,i,a,r,s));return c.anchor.setTo(.5),c.scale.setTo(.8),c.health=l,c.tint=u,c.checkWorldBounds=!0,c.outOfBoundsKill=!0,c}return a(t,e),t}(Phaser.Sprite);i["default"]=r;var s=function(e){function t(e){var i=e.game,a=e.x,r=e.y,s=e.asset,l=e.health,h=e.tint,u=void 0===h?16711680:h;n(this,t);var c=o(this,Object.getPrototypeOf(t).call(this,i,a,r,s));return c.anchor.setTo(.5),c.scale.setTo(.8),c.health=l,c.tint=u,c.checkWorldBounds=!0,c.outOfBoundsKill=!0,c.enableBody=!0,c}return a(t,e),t}(Phaser.Sprite);i["default"]=s},{}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},h=e("./bullet"),u=n(h),c=function(e){function t(e){var i=e.game,n=e.x,r=e.y,s=e.asset,l=e.frame,h=e.health,u=e.bulletSpeed;o(this,t);var c=a(this,Object.getPrototypeOf(t).call(this,i,n,r,s,l));return c.game=i,c.anchor.setTo(.5),c.scale.setTo(.8),c.health=h,c.maxHealth=h,c.game.physics.arcade.enable(c),c.animations.add("spinning",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],30,!0),c.play("spinning"),c.bullets=c.game.add.group(),c.bullets.enableBody=!0,c.bulletSpeed=u,c.player,c}return r(t,e),s(t,[{key:"update",value:function(){this.position.y<.04*this.game.world.height?(this.position.y=.04*this.game.world.height+2,this.body.velocity.y*=-1):this.position.y>.96*this.game.world.height&&(this.position.y=.96*this.game.world.height-2,this.body.velocity.y*=-1),this.position.x<0&&this.kill()}},{key:"shoot",value:function(e){var t=this.bullets.getFirstExists(!1);t?t.reset(this.x,this.bottom,2):(t=new u["default"]({game:this.game,x:this.x,y:this.bottom,health:5,asset:"bullet",tint:16731469}),this.bullets.add(t)),e?t.body.rotation=this.game.physics.arcade.moveToObject(t,e,this.bulletSpeed):t.body.velocity.x=-1*this.bulletSpeed}},{key:"damage",value:function(e){l(Object.getPrototypeOf(t.prototype),"damage",this).call(this,e)}},{key:"reset",value:function(e){var i=e.x,n=e.y,o=e.health,a=e.bulletSpeed,r=e.speed;l(Object.getPrototypeOf(t.prototype),"reset",this).call(this,i,n,o),this.bulletSpeed=a,this.body.velocity.x=r.x,this.body.velocity.y=r.y}}]),t}(Phaser.Sprite);i["default"]=c},{"./bullet":4}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e){var i=e.game,a=e.player;n(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,i));return r.game=i,r.player=a,r.totalTime=0,r.width=800,r.score=0,r.timer=0,r.highScore=localStorage.getItem("high-score"),r.maxHealth=r.player.health,r.lastHp=r.player.health/r.maxHealth*100,r.originalWidth=$(window).width(),window.addEventListener("resize",r.handleResize.bind(r),!1),$("#menu").hide(),$("#hud").show(),$("#circle").circleProgress({value:100,size:50,fill:{gradient:["red","orange"]}}),r.handleResize(),r}return a(t,e),r(t,[{key:"handleResize",value:function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=($(window).width(),576),i=e/t;$("#hud").css("transform","scale("+i+")")}},{key:"update",value:function(){this.totalTime+=this.game.time.physicsElapsed,this.timer=Math.round(this.totalTime),$(".timeText h1").text("Time: "+this.timer)}},{key:"updateHealth",value:function(){var e=Math.round(this.player.health/this.maxHealth*100);$("#circle h1").text(String(e)),$("#circle").circleProgress({value:.01*e,animationStartValue:.01*Math.round(this.lastHp)}),this.lastHp=this.player.health/this.maxHealth*100}},{key:"updateScore",value:function(e){this.score+=e,$(".scoreText h1").text("Score: "+10*this.score),this.highScore<this.score&&localStorage.setItem("high-score",this.score)}},{key:"returnScore",value:function(){return this.score}}]),t}(Phaser.Group);i["default"]=s},{}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(){if(n(this,e),this.pilotData=JSON.parse(localStorage.getItem("pilotData")),!this.pilotData){var t={pilot:[]};t.pilot.push({id:0,hp:20,name:"A1","class":"gunner",stat:1,relation:{A2:1,A3:1,A4:1,A5:2},highScore:0}),t.pilot.push({id:1,hp:20,name:"A2","class":"gunner",stat:1,relation:{A2:1,A3:1,A4:1,A5:1},highScore:0}),localStorage.setItem("pilotData",JSON.stringify(t))}}return o(e,[{key:"createPilot",value:function(){this.pilotData.pilot.push({id:this.pilotData.pilot.length,hp:20,name:"A"+this.pilotData.pilot.length,"class":"gunner",stat:1,relation:{A2:1,A3:1,A4:1,A5:2},highScore:0}),localStorage.setItem("pilotData",JSON.stringify(this.pilotData))}}]),e}();i["default"]=a},{}],8:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(i)},h=e("./bullet"),u=n(h),c=function(e){function t(e){var i=e.game,n=e.x,r=e.y,s=e.asset,l=e.frame,h=e.health;o(this,t);var u=a(this,Object.getPrototypeOf(t).call(this,i,n,r,s,l));return u.game=i,u.anchor.setTo(.5),u.scale.setTo(.8),u.health=h,u.maxHealth=h,u.game.physics.arcade.enable(u),u.enableBody=!0,u.body.maxVelocity.setTo(400,400),u.body.collideWorldBounds=!0,u.diff={x:0,y:0},u.bullets=u.game.add.group(),u.bullets.enableBody=!0,u.bulletSpeed=-500,u.loadout=localStorage.getItem("loadout"),u}return r(t,e),s(t,[{key:"update",value:function(){var e=this.game.input.keyboard.isDown(Phaser.Keyboard.UP)||this.game.input.keyboard.isDown(Phaser.KeyCode.W),t=this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)||this.game.input.keyboard.isDown(Phaser.KeyCode.S),i=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)||this.game.input.keyboard.isDown(Phaser.KeyCode.A),n=this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)||this.game.input.keyboard.isDown(Phaser.KeyCode.D),o=500,a=50,r=30;this.loadout<6?(e?this.body.velocity.y=-400:t?this.body.velocity.y=400:this.body.velocity.y=0,n?this.body.velocity.x=500:i?this.body.velocity.x=-500:this.body.velocity.x=0):(e?this.body.acceleration.y=-o:t?this.body.acceleration.y=o:this.body.velocity.y>r?this.body.acceleration.y-=a:this.body.velocity.y<-r?this.body.acceleration.y+=a:(this.body.velocity.y=0,this.body.acceleration.y=0),n?this.body.acceleration.x=o:i?this.body.acceleration.x=-o:this.body.velocity.x>r?this.body.acceleration.x-=a:this.body.velocity.x<-r?this.body.acceleration.x+=a:(this.body.velocity.x=0,this.body.acceleration.x=0))}},{key:"shoot",value:function(){var e=this.bullets.getFirstExists(!1),t=this.y-3;e?e.reset(this.x,t=this.y-3,3):(e=new u["default"]({game:this.game,x:this.x,y:t=this.y-3,health:3,asset:"bullet",tint:13434828}),this.bullets.add(e)),this.loadout<6?e.body.velocity.x=-1*this.bulletSpeed:e.body.rotation=this.game.physics.arcade.moveToPointer(e,-this.bulletSpeed,this.game.input.activePointer)}},{key:"damage",value:function(e){l(Object.getPrototypeOf(t.prototype),"damage",this).call(this,e)}}]),t}(Phaser.Sprite);i["default"]=c},{"./bullet":4}],9:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),r(t,[{key:"preload",value:function(){this.game.stage.backgroundColor="#000",this.load.image("loaderBg","img/loader-bg.310894d4.png"),this.load.image("loaderBar","img/loader-bar.a441202a.png")}},{key:"create",value:function(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.physics.startSystem(Phaser.Physics.ARCADE),this.state.start("Preload")}}]),t}(Phaser.State);i["default"]=s},{}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var o=e("./boot");Object.defineProperty(i,"Boot",{enumerable:!0,get:function(){return n(o)["default"]}});var a=e("./preload");Object.defineProperty(i,"Preload",{enumerable:!0,get:function(){return n(a)["default"]}});var r=e("./menu");Object.defineProperty(i,"Menu",{enumerable:!0,get:function(){return n(r)["default"]}});var s=e("./play");Object.defineProperty(i,"Play",{enumerable:!0,get:function(){return n(s)["default"]}});var l=e("./over");Object.defineProperty(i,"Over",{enumerable:!0,get:function(){return n(l)["default"]}})},{"./boot":9,"./menu":11,"./over":12,"./play":13,"./preload":14}],11:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0}),i.Main=void 0;var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../prefabs/pilotManager"),h=n(l),u=e("../cube"),c=n(u),p=void 0,f=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"create",value:function(){var e=this;new d,this.farback=this.add.tileSprite(0,0,1024,576,"farback"),this.score=localStorage.getItem("high-score"),$(".highScore h1").text("High Score: "+10*this.score),$(".title h1").text("warShip"),$(".intro").show(),$("#btn1 h1").text("ship one"),$("#btn1").click(function(){localStorage.setItem("loadout",10),e.state.start("Play"),$(p).remove()}),$("#btn2 h1").text("start"),$("#btn2").click(function(){localStorage.setItem("loadout",5),e.state.start("Play"),$(p).remove()}),$("#menu").show(),window.addEventListener("resize",this.handleResize.bind(this),!1),this.pilots=new h["default"];var t=jQuery.parseJSON(localStorage.getItem("pilotData"));console.log(t),$("#pilotInfo h1").text(t.pilot[2].name),$("#pClass h1").text(t.pilot[2]["class"]),$("#pScore h1").text(10*t.pilot[2].highScore)}},{key:"handleResize",value:function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=($(window).width(),576),i=e/t;$("#menu").css("transform","scale("+i+")")}}]),t}(Phaser.State);i["default"]=f;var d=i.Main=function(){function e(){o(this,e),this.elements=[],this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.z=5,this.renderer=new THREE.WebGLRenderer({alpha:!0}),document.body.appendChild(this.renderer.domElement),this.handleResize(),window.addEventListener("resize",this.handleResize.bind(this),!1),p=this.renderer.domElement,$(p).addClass("threeClass"),this.addElement(new c["default"]),this.render()}return s(e,[{key:"addElement",value:function(e){this.elements.push(e),e.place(this.scene)}},{key:"handleResize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}},{key:"render",value:function(){this.elements.forEach(function(e){e.render()}),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))}}]),e}()},{"../cube":1,"../prefabs/pilotManager":7}],12:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../extensions/textbutton"),h=(n(l),function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"create",value:function(){var e=this;$("#menu").show(),$(".title h1").text("Game Over!"),$(".intro").hide(),$("#btn1 h1").text("Try Again"),$("#btn1").click(function(){e.state.start("Play")}),$("#btn2 h1").text("Main Menu"),$("#btn2").click(function(){e.state.start("Menu")}),$(".healthbar").width("100%"),$(".scoreText h1").text("Score: 0"),$("#hud").hide(),$("#circle h1").text(100),this.updatePilot()}},{key:"updatePilot",value:function(){var e=jQuery.parseJSON(localStorage.getItem("pilotData"));console.log(e),$("#pilotInfo h1").text(e.pilot[0].name),$("#pClass h1").text(e.pilot[0]["class"]),$("#pScore h1").text(e.pilot[0].highScore)}}]),t}(Phaser.State));i["default"]=h},{"../extensions/textbutton":2}],13:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../prefabs/player"),h=n(l),u=e("../prefabs/enemy"),c=n(u),p=e("../prefabs/hud"),f=n(p),d=function(e){function t(){return o(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"create",value:function(){var e=this;this.pilotData=jQuery.parseJSON(localStorage.getItem("pilotData")),this.farback=this.add.tileSprite(0,0,1024,576,"farback"),this.totalTime=0,this.game.time.slowMotion=1,this.enemies=this.add.group(),this.enemies.enableBody=!0,this.enemies2=this.add.group(),this.enemies2.enableBody=!0,this.player=new h["default"]({game:this.game,x:this.game.world.centerX,y:.92*this.game.world.height,health:this.pilotData.pilot[2].hp,asset:"newfigther",frame:1}),this.game.stage.addChild(this.player),this.hud=new f["default"]({game:this.game,player:this.player}),this.game.input.onDown.add(function(){e.playerShooting=!0}),this.game.input.onUp.add(function(){e.playerShooting=!1}),this.enemyTime=0,this.enemyTime2=0,this.enemyInterval=1,this.enemyInterval2=1,this.enemyShootTime=0,this.enemyShootTime2=0,this.enemyShootInterval=3;var t=localStorage.getItem("loadout");this.playerShootTime=0,this.playerShootInterval=.01*t,this.playerShooting=!1,this.game.time.events.loop(10*Phaser.Timer.SECOND,function(){e.enemyInterval>.2&&(e.enemyInterval-=.1)}),this.overlayBitmap=this.add.bitmapData(this.game.width,this.game.height),this.overlayBitmap.ctx.fillStyle="#000",this.overlayBitmap.ctx.fillRect(0,0,this.game.width,this.game.height),this.overlay=this.add.sprite(0,0,this.overlayBitmap),this.overlay.visible=!1,this.overlay.alpha=.75}},{key:"update",value:function(){var e=this;this.totalTime+=this.game.time.physicsElapsed,this.enemyTime+=this.game.time.physicsElapsed,this.enemyTime2+=this.game.time.physicsElapsed,this.enemyShootTime+=this.game.time.physicsElapsed,this.enemyShootTime2+=this.game.time.physicsElapsed,this.playerShootTime+=this.game.time.physicsElapsed,this.enemyTime>this.enemyInterval&&(this.enemyTime=0,this.createEnemy({game:this.game,x:this.game.width,y:10*this.game.rnd.integerInRange(6,76),speed:{x:-10*this.game.rnd.integerInRange(5,10),y:1},health:1,bulletSpeed:250,asset:"alien"})),this.totalTime>10&&this.enemyTime2>this.enemyInterval2&&(this.enemyInterval=3,this.enemyTime2=0,this.createEnemy2({game:this.game,x:this.game.width,y:10*this.game.rnd.integerInRange(6,76),speed:{x:-10*this.game.rnd.integerInRange(5,10),y:10*this.game.rnd.integerInRange(5,10)},health:9,bulletSpeed:10*this.game.rnd.integerInRange(15,25),asset:"alien2"})),this.enemyShootTime>this.enemyShootInterval&&(this.enemyShootTime=0,this.enemies.forEachAlive(function(t){return t.shoot(e.player)}),this.player.alive||this.game.world.bringToTop(this.overlay)),this.enemyShootTime2>this.enemyShootInterval&&(this.enemyShootTime2=0,this.enemies2.forEachAlive(function(e){return e.shoot()}),this.player.alive||this.game.world.bringToTop(this.overlay)),this.playerShooting&&this.playerShootTime>this.playerShootInterval&&(this.playerShootTime=0,this.player.alive&&this.player.shoot()),this.game.physics.arcade.overlap(this.player.bullets,this.enemies,this.hitEnemy,null,this),this.game.physics.arcade.overlap(this.player.bullets,this.enemies2,this.hitEnemy,null,this),this.game.physics.arcade.overlap(this.player,this.enemies,this.crashEnemy,null,this),this.game.physics.arcade.overlap(this.player,this.enemies2,this.crashEnemy,null,this),this.enemies.forEach(function(t){return e.game.physics.arcade.overlap(e.player,t.bullets,e.hitPlayer,null,e)}),this.enemies2.forEach(function(t){return e.game.physics.arcade.overlap(e.player,t.bullets,e.hitPlayer,null,e)}),this.farback.tilePosition.x-=3}},{key:"createEnemy",value:function(e){var t=this.enemies.getFirstExists(!1);t||(t=new c["default"](e),this.enemies.add(t)),t.reset(e)}},{key:"createEnemy2",value:function(e){var t=this.enemies2.getFirstExists(!1);t||(t=new c["default"](e),this.enemies2.add(t)),t.reset(e)}},{key:"hitEffect",value:function(e,t){var i=this,n=this.game.add.tween(e),o=this.game.add.emitter(),a=0,r=100,s=10;n.to({tint:16711680},100),n.onComplete.add(function(){e.tint=16777215}),n.start(),o.x=e.x,o.y=e.y,o.gravity=0,o.makeParticles("particle"),e.health<=0&&(r=200,s=40,t=16711680),o.minParticleSpeed.setTo(-r,-r),o.maxParticleSpeed.setTo(r,r),o.start(!0,500,null,s),o.update=function(){a+=i.game.time.physicsElapsed,a>=.6&&(a=0,o.destroy())},o.forEach(function(e){return e.tint=t}),this.player.alive||this.game.world.bringToTop(this.overlay)}},{key:"hitEnemy",value:function(e,t){t.damage(e.health),this.hitEffect(t,e.tint),t.alive||this.hud.updateScore(t.maxHealth),e.kill()}},{key:"hitPlayer",value:function(e,t){e.damage(t.health),this.hud.updateHealth(),this.hitEffect(e,t.tint),e.alive||this.gameOver(),t.kill()}},{key:"crashEnemy",value:function(e,t){e.damage(t.health),t.damage(t.health),this.hitEffect(e),this.hitEffect(t),t.alive||this.hud.updateScore(t.maxHealth),this.hud.updateHealth(),e.alive||this.gameOver()}},{key:"gameOver",value:function(){var e=this;this.game.time.slowMotion=3,this.overlay.visible=!0,this.game.world.bringToTop(this.overlay),$("#circle").circleProgress({value:0}),$("#circle h1").text(" ");var t=this.game.time.create(this.game,!0);t.add(3e3,function(){e.game.state.start("Over")}),t.start(),this.updatePilot()}},{key:"updatePilot",value:function(){console.log(this.hud.score);var e=this.pilotData.pilot[2].highScore;console.log(e),this.pilotData.pilot[2].highScore=e+this.hud.score,console.log(this.pilotData.pilot[2].highScore);var t=JSON.stringify(this.pilotData);localStorage.setItem("pilotData",t)}}]),t}(Phaser.State);i["default"]=d},{"../prefabs/enemy":5,"../prefabs/hud":6,"../prefabs/player":8}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return a(t,e),r(t,[{key:"preload",value:function(){this.loaderBg=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBg"),this.loaderBar=this.add.sprite(this.game.world.centerX,this.game.world.centerY,"loaderBar"),this.loaderBg.anchor.setTo(.5),this.loaderBar.anchor.setTo(.5),this.load.setPreloadSprite(this.loaderBar),this.load.atlasJSONArray("smallfighter","img/spritesheet/smallfighter.fde38ee6.png","data/spritesheet/smallfighter.cbe14dd3.json"),this.load.atlasJSONArray("newfigther","img/spritesheet/newfigther.40eae0cb.png","data/spritesheet/newfigther.e4354c65.json"),this.load.atlasJSONArray("alien","img/spritesheet/alien.44bbb602.png","data/spritesheet/alien.78bc238d.json"),this.load.atlasJSONArray("alien2","img/spritesheet/alien2.dee244f4.png","data/spritesheet/alien.78bc238d.json"),this.load.atlasJSONArray("button","img/spritesheet/button.13a26c21.png","data/spritesheet/button.2e5a8520.json"),this.load.image("farback","img/night_sky.85b68434.png"),this.load.image("bullet","img/bullet.2de9ae78.png"),this.load.image("particle","img/particle.1d47c67e.gif"),this.load.image("healthbar","img/healthbar.d9567897.png"),this.load.image("hudBg","img/hud-bg.c0034354.png"),this.load.audio("playMusic",["audio/music/play.461c27fe.mp3"]),this.load.audio("menuMusic",["audio/music/Psyrius - Mercury.a8964d33.mp3"]),this.load.audio("menuOver",["audio/sound/menu-over.adf7e1ff.mp3"]),this.load.audio("menuOut",["audio/sound/menu-out.b4fb68f8.mp3"]),this.load.audio("menuDown",["audio/sound/menu-click.76947bdf.mp3"]),this.load.audio("bulletHit",["audio/sound/bullet-hit.b5d75795.mp3"]),this.load.audio("enemyShot",["audio/sound/enemy-shot.b33bb7cb.mp3"]),this.load.audio("enemyExplosion",["audio/sound/enemy-explosion.f648d3c1.mp3"]),this.load.audio("playerShot",["audio/sound/player-shot.bb42bb0f.mp3"]),this.load.audio("playerExplosion",["audio/sound/player-explosion.cdf713b1.mp3"]),this.load.audio("gameOver",["audio/sound/game-over.96e076dd.mp3"]),this.load.json("gameData","data/gameData.a0349def.json")}},{key:"create",value:function(){this.state.start("Menu")}}]),t}(Phaser.State);i["default"]=s},{}]},{},[3]);